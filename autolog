import paramiko
from datetime import datetime

# SSH 접속 정보
pem_path = "seunghyun-safe-key.pem"  # Jupyter 실행 디렉토리에 있어야 함
host = "52.78.14.216"
username = "ec2-user"

# 로그 메시지 생성
log_message = f"[Python툴로그] {datetime.utcnow()} 내 주량은 한병, 술 주정 없음, 키: 178, 몸무게: 70kg, 러닝좋아함"

# SSH 접속
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(host, username=username, key_filename=pem_path)

# 로그 작성 명령 실행
command = f'echo "{log_message}" >> ~/job_request.log'
stdin, stdout, stderr = ssh.exec_command(command)

# 결과 출력
print("✅ 로그 전송 완료:", log_message)
ssh.close()
